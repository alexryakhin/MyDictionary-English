//
//  CountryRegion.swift
//  My Dictionary
//
//  Created by AI Assistant on 1/10/25.
//

import Foundation

/**
 Represents country/region codes used for building locale codes for TTS services.

 The region code is combined with a language code to create a full locale (e.g., "en-US", "es-MX").
 Google TTS and other services automatically handle whether a specific combination is supported,
 falling back to the base language if needed.

 Supported combinations include:
 - English: US, GB, AU, CA, IN, IE, ZA, SG, BE, NZ
 - Spanish: ES, MX, US, CO, AR, CL
 - French: FR, CA, BE, CH
 - German: DE, AT, CH
 - Portuguese: BR, PT
 - Italian: IT, CH
 - And many more...
 */
enum CountryRegion: String, CaseIterable, Codable {
    // Americas
    case unitedStates = "US"
    case canada = "CA"
    case mexico = "MX"
    case argentina = "AR"
    case brazil = "BR"
    case chile = "CL"
    case colombia = "CO"

    // Europe
    case unitedKingdom = "GB"
    case ireland = "IE"
    case spain = "ES"
    case france = "FR"
    case germany = "DE"
    case italy = "IT"
    case portugal = "PT"
    case netherlands = "NL"
    case belgium = "BE"
    case switzerland = "CH"
    case austria = "AT"
    case poland = "PL"
    case sweden = "SE"
    case denmark = "DK"
    case norway = "NO"
    case finland = "FI"
    case greece = "GR"
    case czechRepublic = "CZ"
    case romania = "RO"
    case hungary = "HU"
    case slovakia = "SK"
    case croatia = "HR"

    // Asia Pacific
    case australia = "AU"
    case newZealand = "NZ"
    case india = "IN"
    case singapore = "SG"
    case japan = "JP"
    case china = "CN"
    case hongKong = "HK"
    case taiwan = "TW"
    case korea = "KR"
    case thailand = "TH"
    case vietnam = "VN"
    case indonesia = "ID"
    case malaysia = "MY"
    case philippines = "PH"

    // Middle East & Africa
    case southAfrica = "ZA"
    case israel = "IL"
    case turkey = "TR"
    case egypt = "EG"
    case saudiArabia = "SA"
    case uae = "AE"

    static var allCasesSorted: [CountryRegion] {
        Self.allCases.sorted { $0.displayName < $1.displayName }
    }

    var displayName: String {
        // Use Locale to get localized country names
        let locale = Locale.current
        return locale.localizedString(forRegionCode: rawValue) ?? rawValue
    }

    var flagEmoji: String {
        switch self {
            // Americas
        case .unitedStates: return "ðŸ‡ºðŸ‡¸"
        case .canada: return "ðŸ‡¨ðŸ‡¦"
        case .mexico: return "ðŸ‡²ðŸ‡½"
        case .argentina: return "ðŸ‡¦ðŸ‡·"
        case .brazil: return "ðŸ‡§ðŸ‡·"
        case .chile: return "ðŸ‡¨ðŸ‡±"
        case .colombia: return "ðŸ‡¨ðŸ‡´"

            // Europe
        case .unitedKingdom: return "ðŸ‡¬ðŸ‡§"
        case .ireland: return "ðŸ‡®ðŸ‡ª"
        case .spain: return "ðŸ‡ªðŸ‡¸"
        case .france: return "ðŸ‡«ðŸ‡·"
        case .germany: return "ðŸ‡©ðŸ‡ª"
        case .italy: return "ðŸ‡®ðŸ‡¹"
        case .portugal: return "ðŸ‡µðŸ‡¹"
        case .netherlands: return "ðŸ‡³ðŸ‡±"
        case .belgium: return "ðŸ‡§ðŸ‡ª"
        case .switzerland: return "ðŸ‡¨ðŸ‡­"
        case .austria: return "ðŸ‡¦ðŸ‡¹"
        case .poland: return "ðŸ‡µðŸ‡±"
        case .sweden: return "ðŸ‡¸ðŸ‡ª"
        case .denmark: return "ðŸ‡©ðŸ‡°"
        case .norway: return "ðŸ‡³ðŸ‡´"
        case .finland: return "ðŸ‡«ðŸ‡®"
        case .greece: return "ðŸ‡¬ðŸ‡·"
        case .czechRepublic: return "ðŸ‡¨ðŸ‡¿"
        case .romania: return "ðŸ‡·ðŸ‡´"
        case .hungary: return "ðŸ‡­ðŸ‡º"
        case .slovakia: return "ðŸ‡¸ðŸ‡°"
        case .croatia: return "ðŸ‡­ðŸ‡·"

            // Asia Pacific
        case .australia: return "ðŸ‡¦ðŸ‡º"
        case .newZealand: return "ðŸ‡³ðŸ‡¿"
        case .india: return "ðŸ‡®ðŸ‡³"
        case .singapore: return "ðŸ‡¸ðŸ‡¬"
        case .japan: return "ðŸ‡¯ðŸ‡µ"
        case .china: return "ðŸ‡¨ðŸ‡³"
        case .hongKong: return "ðŸ‡­ðŸ‡°"
        case .taiwan: return "ðŸ‡¹ðŸ‡¼"
        case .korea: return "ðŸ‡°ðŸ‡·"
        case .thailand: return "ðŸ‡¹ðŸ‡­"
        case .vietnam: return "ðŸ‡»ðŸ‡³"
        case .indonesia: return "ðŸ‡®ðŸ‡©"
        case .malaysia: return "ðŸ‡²ðŸ‡¾"
        case .philippines: return "ðŸ‡µðŸ‡­"

            // Middle East & Africa
        case .southAfrica: return "ðŸ‡¿ðŸ‡¦"
        case .israel: return "ðŸ‡®ðŸ‡±"
        case .turkey: return "ðŸ‡¹ðŸ‡·"
        case .egypt: return "ðŸ‡ªðŸ‡¬"
        case .saudiArabia: return "ðŸ‡¸ðŸ‡¦"
        case .uae: return "ðŸ‡¦ðŸ‡ª"
        }
    }

    /// Builds a full locale code by combining language and region (e.g., "en-US", "es-MX")
    func localeCode(for languageCode: String) -> String {
        return "\(languageCode)-\(rawValue)"
    }

    /// Returns popular regions for a given language
    static func popularRegions(for languageCode: String) -> [CountryRegion] {
        switch languageCode.lowercased() {
        case "en":
            return [.unitedStates, .unitedKingdom, .australia, .canada, .india, .ireland, .southAfrica]
        case "es":
            return [.spain, .mexico, .argentina, .colombia, .chile, .unitedStates]
        case "fr":
            return [.france, .canada, .belgium, .switzerland]
        case "de":
            return [.germany, .austria, .switzerland]
        case "pt":
            return [.brazil, .portugal]
        case "it":
            return [.italy, .switzerland]
        case "nl":
            return [.netherlands, .belgium]
        case "pl":
            return [.poland]
        case "sv":
            return [.sweden]
        case "da":
            return [.denmark]
        case "no":
            return [.norway]
        case "fi":
            return [.finland]
        case "el":
            return [.greece]
        case "cs":
            return [.czechRepublic]
        case "ro":
            return [.romania]
        case "hu":
            return [.hungary]
        case "sk":
            return [.slovakia]
        case "hr":
            return [.croatia]
        case "ja":
            return [.japan]
        case "zh":
            return [.china, .taiwan, .hongKong]
        case "ko":
            return [.korea]
        case "th":
            return [.thailand]
        case "vi":
            return [.vietnam]
        case "id":
            return [.indonesia]
        case "ms":
            return [.malaysia]
        case "tr":
            return [.turkey]
        case "ar":
            return [.saudiArabia, .egypt, .uae]
        case "he":
            return [.israel]
        default:
            return [.unitedStates] // Default fallback
        }
    }
}

